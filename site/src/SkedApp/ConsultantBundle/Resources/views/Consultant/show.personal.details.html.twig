{% extends "SkedAppConsultantBundle::layout.html.twig" %}
{% block title %}Consultant Profile{% endblock %}

{% block body %}
<div class="row-fluid body-secondary">
    <div class="span12">
        <div class="tabbable"> <!-- Only required for left/right tabs -->
            <ul class="nav nav-tabs">
                <li class="active"><a href="#tab1" data-toggle="tab">Personal Details</a></li>
                <li><a href="#tab2" data-toggle="tab">Bookings</a></li>
            </ul>
            <div class="tab-content" id="tab1">
                <div class="tab-pane active">
                    <div class="span6">
                        <h3>Consultant Profile</h3>
                        <div class="white-bg">
                            {% if file_exists(web_path~asset('uploads/consultants/'~consultant.id~'.'~consultant.path)) %}
                                <img src="{{ asset('uploads/consultants/'~consultant.id~'.'~consultant.path) }}"  width="140" height="140" class="pull-left space-right img-polaroid"/>
                                {% else %}
                                {% if consultant.gender.name == "Male" %}
                                <img src="{{ asset('/img/male.jpg') }}" width="140" height="140" class="pull-left space-right img-polaroid"/>
                                {% else %}
                                <img src="{{ asset('/img/female.jpg') }}" width="140" height="140" class="pull-left space-right img-polaroid"/>
                                {% endif %}
                            {% endif %}
                            <table>
                                <tr>
                                    <td>Fullname:</td>
                                    <td><strong>{{ consultant.fullName }}</strong></td>
                                </tr>
                                <tr>
                                    <td>Services:</td>
                                    <td>
                                        {% for service in consultant.consultantServices %}
                                          <span class="label {{ cycle(['label-info', 'label-warning'], service.id) }}">{{ service.name }}</span>                                         
                                        {% else %}
                                         No listed services.
                                        {% endfor %}
                                    </td>
                                </tr>
                                <tr>
                                    <td>Service Provider:</td>
                                    <td><strong>{{ consultant.company.name }}</strong></td>
                                </tr>
                                <tr>
                                    <td>Contact Number:</td>
                                    <td><strong>{{ consultant.company.contactNumber }}</strong></td>
                                </tr>
                            </table>    
                            <div class="clearfix"></div>
                        </div>    
                        <div class="spacer1"></div>
                        <table class="table table-bordered">
                            <tbody>
                                <tr>
                                  {% set arrSlots = consultant.getAvailableBookingSlots() %}  
                                    {% for time_slot in arrSlots.time_slots %}      
                                    <td class="dark-gray-text"><strong>{{ time_slot.start_time }}</strong><br><em><small>{{ time_slot.date }} {{ time_slot.year }}</small></em></td>
                                    {% endfor %}
                                </tr>
                            </tbody>
                        </table>
                    </div> <!-- End .span6 -->
                    <div class="span6">
                        {% render url('sked_app_service_provider_show_map', { 'id': consultant.company.id }) %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div> <!-- End .row-fluid -->

{% endblock body %}